{% load humanize %}
<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Date</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Method</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Amount</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for payment in sale.payments.all %}
            <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ payment.payment_date|date:"M d, Y" }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ payment.get_payment_method_display }}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600">₦{{ payment.amount|floatformat:2|intcomma }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3" class="px-6 py-4 text-center text-gray-500 text-sm">No payments recorded</td>
            </tr>
            {% endfor %}
            {% if sale.amount_paid > 0 %}
            <tr class="bg-gray-50 font-bold">
                <td colspan="2" class="px-6 py-3 text-right text-gray-900">Total Paid</td>
                <td class="px-6 py-3 text-green-700">₦{{ sale.amount_paid|floatformat:2|intcomma }}</td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>